<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>手动组卷</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../layuiadmin/style/admin.css" media="all">
</head>
<body>
<div class="layui-form" >
    <div id="xtree1" style="width:300px;padding: 10px 0 25px 5px;float: left"></div>
</div>
<div style="float:left;">
    <div class="layui-card">
        <div class="layui-form layui-card-header layuiadmin-card-header-auto">
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">题目内容</label>
                    <div class="layui-input-inline">
                        <input type="text" name="question" placeholder="请输入题目内容" autocomplete="off" class="layui-input">
                    </div>
                    <label class="layui-form-label">类型</label>
                    <div class="layui-input-inline">
                        <select name="type" id="typeId">
                            <option value="">全部</option>
                            <option value="1">选择题</option>
                            <option value="2">填空题</option>
                            <option value="3">判断题</option>
                            <option value="4">问答题</option>
                        </select>
                    </div>
                </div>
                <br>

                <div class="layui-inline">
                    <label class="layui-form-label">难度</label>
                    <div class="layui-input-inline">
                        <select name="degree" id="examdegree">
                            <option value="">全部</option>
                            <option value="1">简单</option>
                            <option value="2">一般</option>
                            <option value="3">较难</option>
                            <option value="4">困难</option>
                        </select>
                    </div>
                </div>
                    <button class="layui-btn layuiadmin-btn-comm" data-type="reload" lay-submit
                            lay-filter="LAY-app-contcomm-search">
                        <i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
                    </button>

                </div>
        </div>

    </div>
    <div id="fenye">
    </div>
</div>


</body>

<script src="../layuiadmin/layui/layui.js"></script>
<script src="../layuiadmin/layui/layui-xtree.js"></script>
<script>

    layui.config({
        base: '../layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'form', 'laypage', 'upload'], function () {
        var $ = layui.$
            , form = layui.form
            , laypage = layui.laypage;
        var xtree1 = new layuiXtree({
            elem: 'xtree1'   //(必填) 放置xtree的容器id，不要带#号
            , form: form     //(必填) layui 的 from
            , data: '/zsd/zsdTree'
            , isopen: false
        });
        var count = 50;
        var limit = 10;
        //总页数低于页码总数
        laypage.render({
            elem: 'fenye'
            , limit: limit
            , count: count //数据总数
            ,jump:function (pageObj,first) {
                if(!first){
                    console.log(pageObj)
                }

            }
        });
        //监听搜索
        form.on('submit(LAY-app-contcomm-search)', function (data) {
            var items = xtree1.GetChecked();
            var ids=[];
            items.forEach(function (item) {
                ids.push(item.value);
            })
            var postData = {"question":data.field.question,"type":data.field.type,
                "degree":data.field.degree,"ids":ids.join(","),curPage:'1',limit:limit};
            $.ajax({
                url: '/exam/getExamForZuJuan',
                data: postData,
                method:"post",
                success:function (res) {
                    count = res.count;
                    laypage.render();
                    console.log(res)
                }
            });

        });
    })
</script>


</html>